"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[290],{4625:(Z,u,n)=>{n.d(u,{p:()=>y});var c=n(6019),d=n(9133),g=n(7185),h=n(3668);let y=(()=>{class s{}return s.\u0275fac=function(m){return new(m||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[c.ez,g.q,d.u5]]}),s})()},9290:(Z,u,n)=>{n.r(u),n.d(u,{TicketMonthlyModule:()=>it});var c=n(6019),d=n(9133),g=n(6113),h=n(4625),y=n(7185),s=n(4382),f=n(4762),m=n(2968),T=n(2262),r=n(240),P=n(1168),x=n(9190),S=n(7182),t=n(3668),M=n(5304);let D=(()=>{class o{constructor(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var A=n(9978),b=n(1136),R=n(7635),v=n(86),N=n(4643),C=n(9009),_=n(904),J=n(3530),k=n(9112);function B(o,a){1&o&&t._UZ(0,"mat-progress-bar",18)}function L(o,a){1&o&&(t.TgZ(0,"th",19),t.TgZ(1,"mat-checkbox",20),t.NdJ("click",function(i){return i.stopPropagation()}),t.qZA(),t.qZA())}function I(o,a){1&o&&(t.TgZ(0,"td",21),t.TgZ(1,"mat-checkbox",20),t.NdJ("click",function(i){return i.stopPropagation()}),t.qZA(),t.qZA())}function O(o,a){1&o&&t._UZ(0,"th",22)}function Q(o,a){if(1&o&&(t.TgZ(0,"td",23),t._UZ(1,"img",24),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.MGl("src","http://i.pravatar.cc/30?u=",e.name,"",t.LSH)}}function Y(o,a){if(1&o&&(t.TgZ(0,"th",29),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function U(o,a){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=a.$implicit,i=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e[i.property]," ")}}function z(o,a){if(1&o&&(t.ynx(0,26),t.YNc(1,Y,2,1,"th",27),t.YNc(2,U,2,1,"td",28),t.BQk()),2&o){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function F(o,a){if(1&o&&(t.ynx(0),t.YNc(1,z,3,1,"ng-container",25),t.BQk()),2&o){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isModelProperty)}}function E(o,a){1&o&&t._UZ(0,"th",31)}function G(o,a){if(1&o&&(t.TgZ(0,"td",21),t.TgZ(1,"button",32),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e.actionsMenu)}}function H(o,a){1&o&&t._UZ(0,"tr",33)}function $(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",34),t.NdJ("click",function(){const p=t.CHM(e).$implicit;return t.oxw().updateCustomer(p)}),t.qZA()}}const W=[{path:"",component:(()=>{class o{constructor(e,i,l){this.dialog=e,this.goldenTicketService=i,this.campaignService=l,this.isLoading=!1,this.totalRows=0,this.pageSize=25,this.currentPage=0,this.pageSizeOptions=[5,10,25,100],this.filters={},this.notyf=new S.Iq({types:[{type:"info",background:"#6495ED",icon:'<i class="fa-solid fa-clock"></i>'}]}),this.columns=[{name:"Checkbox",property:"checkbox",visible:!1},{name:"Month",property:"month",visible:!0,isModelProperty:!0},{name:"Initials",property:"initilas",visible:!0,isModelProperty:!0},{name:"Rebills",property:"rebills",visible:!0,isModelProperty:!0},{name:"Cycle 1 %",property:"cycle_1_per",visible:!0,isModelProperty:!0},{name:"AVG Day %",property:"avg_per",visible:!0,isModelProperty:!0},{name:"% Filled",property:"filled_per",visible:!0,isModelProperty:!0},{name:"Avg Ticket",property:"avg_ticket",visible:!0,isModelProperty:!0},{name:"Revenue",property:"revenue",visible:!0,isModelProperty:!0},{name:"Refund",property:"refund",visible:!0,isModelProperty:!0},{name:"Refund Rate",property:"refund_rate",visible:!0,isModelProperty:!0},{name:"CBs",property:"CBs",visible:!0,isModelProperty:!0},{name:"CB %",property:"CB_per",visible:!0,isModelProperty:!0},{name:"CB $",property:"CB_currency",visible:!0,isModelProperty:!0},{name:"Fulfillment",property:"fulfillment",visible:!0,isModelProperty:!0},{name:"Processing",property:"processing",visible:!0,isModelProperty:!0},{name:"CPA",property:"cpa",visible:!0,isModelProperty:!0},{name:"CPA AVG",property:"cpa_avg",visible:!0,isModelProperty:!0},{name:"Net",property:"net",visible:!0,isModelProperty:!0},{name:"CLV",property:"clv",visible:!0,isModelProperty:!0}]}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}ngOnInit(){this.getSubscription=this.campaignService.ticketMonthlyResponse$.subscribe(e=>this.manageGetResponse(e)),this.getData(),this.dataSource=new r.by}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}pageChanged(e){this.pageSize=e.pageSize,this.currentPage=e.pageIndex,this.getData()}getData(){return(0,f.mG)(this,void 0,void 0,function*(){this.isLoading=!0,yield this.campaignService.getMonthlyTicket().then(e=>{this.tickets=e.data,this.dataSource.data=e.data,setTimeout(()=>{}),this.isLoading=!1},e=>{this.isLoading=!1})})}manageGetResponse(e){e.status?(this.tickets=e.data,this.dataSource.data=e.data,setTimeout(()=>{}),this.isLoading=!1):this.isLoading=!1}onFilterChange(e){!this.dataSource||(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}refresh(){return(0,f.mG)(this,void 0,void 0,function*(){this.notyf.open({type:"info",message:"Records will be refreshed soon..."}),this.isLoading=!0,yield this.campaignService.refreshMonthlyTicket().then(e=>{this.tickets=e.data,this.dataSource.data=e.data,this.notyf.success("Records are updated successfully"),this.isLoading=!1},e=>{this.isLoading=!1})})}ngOnDestroy(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(M.uw),t.Y36(D),t.Y36(A.U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["fury-ticket-monthly"]],viewQuery:function(e,i){if(1&e&&(t.Gf(m.NW,7),t.Gf(T.YE,7)),2&e){let l;t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.sort=l.first)}},inputs:{columns:"columns"},decls:21,vars:11,consts:[["mode","simple"],["mat-raised-button","","color","accent",1,"mb",3,"click"],["name","Golden STicket (Monthly)",3,"columns","filterChange"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mode","indeterminate"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"fury-page-layout",0),t.TgZ(1,"fury-page-layout-content"),t.TgZ(2,"button",1),t.NdJ("click",function(){return i.refresh()}),t._uU(3,"Refresh"),t.qZA(),t.TgZ(4,"fury-list",2),t.NdJ("filterChange",function(p){return i.onFilterChange(p)}),t.YNc(5,B,1,0,"mat-progress-bar",3),t.TgZ(6,"table",4),t.ynx(7,5),t.YNc(8,L,2,0,"th",6),t.YNc(9,I,2,0,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,O,1,0,"th",9),t.YNc(12,Q,2,1,"td",10),t.BQk(),t.YNc(13,F,2,1,"ng-container",11),t.ynx(14,12),t.YNc(15,E,1,0,"th",13),t.YNc(16,G,4,1,"td",7),t.BQk(),t.YNc(17,H,1,0,"tr",14),t.YNc(18,$,1,0,"tr",15),t.qZA(),t.TgZ(19,"mat-paginator",16,17),t.NdJ("page",function(p){return i.pageChanged(p)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(3),t.Q6J("columns",i.columns),t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(7),t.Q6J("ngForOf",i.columns),t.xp6(4),t.Q6J("matHeaderRowDef",i.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.visibleColumns),t.xp6(1),t.Q6J("length",i.totalRows)("pageIndex",i.currentPage)("pageSize",i.pageSize)("pageSizeOptions",i.pageSizeOptions))},directives:[b.N,R.d,v.lW,N.n,c.O5,r.BZ,T.YE,r.w1,r.fO,r.Dz,c.sg,r.as,r.nj,m.NW,C.pW,r.ge,_.oG,r.ev,T.nU,J.p6,k.Hw,r.XQ,r.Gk],styles:[".mb[_ngcontent-%COMP%]{margin-bottom:10px}"],data:{animation:[P.M,x.X]}}),o})()}];let j=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.Bz.forChild(W)],s.Bz]}),o})();var K=n(9198),X=n(6153),V=n(138),w=n(9859),q=n(6400),tt=n(8727),et=n(6731),ot=n(3050),nt=n(8898);let it=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.ez,j,d.u5,d.UX,y.q,K.Z,X.o9,M.Is,V.c,v.ot,k.Ps,w.Fk,q.LD,tt.FA,et.XK,ot.To,nt.IJ,h.p,g.J,r.p0,m.TU,C.Cv]]}),o})()}}]);