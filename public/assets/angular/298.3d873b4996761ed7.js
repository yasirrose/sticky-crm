"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[298],{4625:(Z,p,a)=>{a.d(p,{p:()=>v});var m=a(6019),g=a(9133),h=a(7185),d=a(3668);let v=(()=>{class s{}return s.\u0275fac=function(c){return new(c||s)},s.\u0275mod=d.oAB({type:s}),s.\u0275inj=d.cJS({imports:[[m.ez,h.q,g.u5]]}),s})()},3298:(Z,p,a)=>{a.r(p),a.d(p,{ViewFormulasModule:()=>ot});var m=a(6019),g=a(9133),h=a(6113),d=a(4625),v=a(7185),s=a(4382),f=a(4762),c=a(2968),C=a(2262),r=a(240),t=a(3668),F=a(5304),w=a(4099),S=a(238);let V=(()=>{class o{constructor(e){this.apiService=e,this.formulasGetResponse=new w.X([]),this.formulasGetResponse$=this.formulasGetResponse.asObservable()}getFormulas(){return(0,f.mG)(this,void 0,void 0,function*(){return yield this.apiService.getData("formulas").then(e=>e.json()).then(e=>{this.orders=e,this.formulasGetResponse.next(e)}),this.orders})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(S.s))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=a(1136),M=a(7635),A=a(4643),y=a(9009),N=a(904),T=a(86),P=a(3530),x=a(9112);function R(o,i){1&o&&t._UZ(0,"mat-progress-bar",17)}function J(o,i){1&o&&(t.TgZ(0,"th",18),t.TgZ(1,"mat-checkbox",19),t.NdJ("click",function(n){return n.stopPropagation()}),t.qZA(),t.qZA())}function I(o,i){1&o&&(t.TgZ(0,"td",20),t.TgZ(1,"mat-checkbox",19),t.NdJ("click",function(n){return n.stopPropagation()}),t.qZA(),t.qZA())}function O(o,i){1&o&&t._UZ(0,"th",21)}function Q(o,i){if(1&o&&(t.TgZ(0,"td",22),t._UZ(1,"img",23),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.MGl("src","http://i.pravatar.cc/30?u=",e.name,"",t.LSH)}}function L(o,i){if(1&o&&(t.TgZ(0,"th",28),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function Y(o,i){if(1&o&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&o){const e=i.$implicit,n=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e[n.property]," ")}}function z(o,i){if(1&o&&(t.ynx(0,25),t.YNc(1,L,2,1,"th",26),t.YNc(2,Y,2,1,"td",27),t.BQk()),2&o){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function G(o,i){if(1&o&&(t.ynx(0),t.YNc(1,z,3,1,"ng-container",24),t.BQk()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.isModelProperty)}}function B(o,i){1&o&&t._UZ(0,"th",30)}function E(o,i){if(1&o&&(t.TgZ(0,"td",20),t.TgZ(1,"button",31),t.NdJ("click",function(n){return n.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e.actionsMenu)}}function U(o,i){1&o&&t._UZ(0,"tr",32)}function _(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().updateCustomer(u)}),t.qZA()}}const b=[{path:"",component:(()=>{class o{constructor(e,n){this.dialog=e,this.viewFormulasService=n,this.isLoading=!1,this.totalRows=0,this.pageSize=25,this.currentPage=0,this.pageSizeOptions=[5,10,25,100],this.filters={},this.columns=[{name:"Checkbox",property:"checkbox",visible:!1},{name:"Name",property:"name",visible:!0,isModelProperty:!0},{name:"Shortcut",property:"shortcut_name",visible:!0,isModelProperty:!0},{name:"Campaign",property:"campaign_name",visible:!0,isModelProperty:!0},{name:"Column Name",property:"column_name",visible:!0,isModelProperty:!0},{name:"Expression",property:"expression",visible:!0,isModelProperty:!0},{name:"created At",property:"created_at",visible:!1,isModelProperty:!0}]}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}ngOnInit(){this.getSubscription=this.viewFormulasService.formulasGetResponse$.subscribe(e=>this.manageGetResponse(e)),this.getData(),this.dataSource=new r.by}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}pageChanged(e){this.pageSize=e.pageSize,this.currentPage=e.pageIndex,this.getData()}getData(){return(0,f.mG)(this,void 0,void 0,function*(){this.isLoading=!0,yield this.viewFormulasService.getFormulas().then(e=>{this.formulas=e.data,this.dataSource.data=e.data,setTimeout(()=>{this.paginator.pageIndex=this.currentPage,this.paginator.length=e.pag.count}),this.isLoading=!1},e=>{this.isLoading=!1})})}manageGetResponse(e){e.status?(this.formulas=e.data,this.dataSource.data=e.data,setTimeout(()=>{this.paginator.pageIndex=this.currentPage,this.paginator.length=e.pag.count}),this.isLoading=!1):this.isLoading=!1}onFilterChange(e){!this.dataSource||(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}ngOnDestroy(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(F.uw),t.Y36(V))},o.\u0275cmp=t.Xpm({type:o,selectors:[["fury-view-formulas"]],viewQuery:function(e,n){if(1&e&&(t.Gf(c.NW,7),t.Gf(C.YE,7)),2&e){let l;t.iGM(l=t.CRH())&&(n.paginator=l.first),t.iGM(l=t.CRH())&&(n.sort=l.first)}},inputs:{columns:"columns"},decls:19,vars:11,consts:[["mode","simple"],["name","Formulas",3,"columns","filterChange"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mode","indeterminate"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"fury-page-layout",0),t.TgZ(1,"fury-page-layout-content"),t.TgZ(2,"fury-list",1),t.NdJ("filterChange",function(u){return n.onFilterChange(u)}),t.YNc(3,R,1,0,"mat-progress-bar",2),t.TgZ(4,"table",3),t.ynx(5,4),t.YNc(6,J,2,0,"th",5),t.YNc(7,I,2,0,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,O,1,0,"th",8),t.YNc(10,Q,2,1,"td",9),t.BQk(),t.YNc(11,G,2,1,"ng-container",10),t.ynx(12,11),t.YNc(13,B,1,0,"th",12),t.YNc(14,E,4,1,"td",6),t.BQk(),t.YNc(15,U,1,0,"tr",13),t.YNc(16,_,1,0,"tr",14),t.qZA(),t.TgZ(17,"mat-paginator",15,16),t.NdJ("page",function(u){return n.pageChanged(u)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("columns",n.columns),t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(7),t.Q6J("ngForOf",n.columns),t.xp6(4),t.Q6J("matHeaderRowDef",n.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.visibleColumns),t.xp6(1),t.Q6J("length",n.totalRows)("pageIndex",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",n.pageSizeOptions))},directives:[D.N,M.d,A.n,m.O5,r.BZ,C.YE,r.w1,r.fO,r.Dz,m.sg,r.as,r.nj,c.NW,y.pW,r.ge,N.oG,r.ev,C.nU,T.lW,P.p6,x.Hw,r.XQ,r.Gk],styles:[""]}),o})()}];let H=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.Bz.forChild(b)],s.Bz]}),o})();var $=a(9198),j=a(6153),W=a(138),K=a(9859),X=a(6400),k=a(8727),q=a(6731),tt=a(3050),et=a(8898);let ot=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.ez,H,g.u5,g.UX,v.q,$.Z,j.o9,F.Is,W.c,T.ot,x.Ps,K.Fk,X.LD,k.FA,q.XK,tt.To,et.IJ,d.p,h.J,r.p0,c.TU,y.Cv]]}),o})()}}]);