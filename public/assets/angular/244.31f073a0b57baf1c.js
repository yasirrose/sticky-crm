"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[244],{4625:(D,m,n)=>{n.d(m,{p:()=>C});var r=n(6019),a=n(9133),y=n(7185),f=n(3668);let C=(()=>{class c{}return c.\u0275fac=function(p){return new(p||c)},c.\u0275mod=f.oAB({type:c}),c.\u0275inj=f.cJS({imports:[[r.ez,y.q,a.u5]]}),c})()},2109:(D,m,n)=>{n.d(m,{z:()=>C});var r=n(5304),a=n(3668),y=n(515),f=n(86);let C=(()=>{class c{constructor(p,u){this.dialogRef=p,this.data=u,this.title=u.title,this.message=u.message}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}return c.\u0275fac=function(p){return new(p||c)(a.Y36(r.so),a.Y36(r.WI))},c.\u0275cmp=a.Xpm({type:c,selectors:[["app-confirmation-dialog"]],decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","fxLayoutAlign","end end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","gray",3,"click"]],template:function(p,u){1&p&&(a.TgZ(0,"h4",0),a._uU(1),a.qZA(),a.TgZ(2,"div",1),a.TgZ(3,"p"),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"div",2),a.TgZ(6,"button",3),a.NdJ("click",function(){return u.onConfirm()}),a._uU(7,"Yes"),a.qZA(),a.TgZ(8,"button",4),a.NdJ("click",function(){return u.onDismiss()}),a._uU(9,"No"),a.qZA(),a.qZA()),2&p&&(a.xp6(1),a.hij(" ",u.title,"\n"),a.xp6(3),a.Oqu(u.message))},directives:[r.uh,r.xY,r.H8,y.Wh,f.lW],styles:[".mat-gray[_ngcontent-%COMP%]{background-color:gray;color:#fff}"]}),c})()},4236:(D,m,n)=>{n.d(m,{f:()=>r});class r{constructor(y,f){this.title=y,this.message=f}}},2244:(D,m,n)=>{n.r(m),n.d(m,{ProspectsModule:()=>pe});var r=n(6019),a=n(9133),y=n(6113),f=n(4625),C=n(7185),c=n(4382),h=n(4762),p=n(2968),u=n(2262),d=n(240),S=n(2919),Z=n(2411),w=n(8735);class O{constructor(o){this.id=o.id,this.first_name=o.first_name,this.last_name=o.last_name,this.address=o.address,this.address2=o.address2,this.city=o.city,this.state=o.state,this.state=o.state,this.zip=o.zip,this.country=o.country,this.phone=o.phone,this.email=o.email,this.ip_address=o.ip_address,this.month_created=o.month_created,this.year_created=o.year_created,this.date_created=o.date_created,this.risk_flag=o.risk_flag,this.affiliate=o.affiliate,this.sub_affiliate=o.sub_affiliate,this.checked=!1}}var k=n(1168),E=n(9190),N=n(8260),U=n(7182),_=n(2109),M=n(4236),e=n(3668),x=n(5304),P=n(4099),T=n(238);let I=(()=>{class i{constructor(t){this.apiService=t,this.GetProspectsResponse=new P.X([]),this.deleteResponse=new P.X([]),this.deleteAllResponse=new P.X([]),this.getProspectResponse$=this.GetProspectsResponse.asObservable(),this.deleteResponse$=this.deleteResponse.asObservable(),this.deleteAllResponse$=this.deleteAllResponse.asObservable()}getProspects(t){return(0,h.mG)(this,void 0,void 0,function*(){return yield this.apiService.getData(`prospects?page=${t.currentPage}&per_page=${t.pageSize}&search=${t.search}`).then(s=>s.json()).then(s=>{this.prospects=s,this.GetProspectsResponse.next(s)}),this.prospects})}deleteProposal(t){return(0,h.mG)(this,void 0,void 0,function*(){yield this.apiService.deleteData(`prospects/${t}`).then(s=>s.json()).then(s=>{this.deleteResponse.next(s)})})}deleteAll(t){return(0,h.mG)(this,void 0,void 0,function*(){yield this.apiService.postData("delete_prospects",t).then(s=>s.json()).then(s=>{this.deleteAllResponse.next(s)})})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(T.s))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var B=n(1136),J=n(7635),R=n(515),z=n(4643),A=n(86),b=n(9009),L=n(904);function $(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleBulkDeleteAction()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij("Delete ",null==t.selectedRows?null:t.selectedRows.length," Prospects")}}function Y(i,o){1&i&&e._UZ(0,"mat-progress-bar",19)}function F(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"th",20),e.TgZ(1,"mat-checkbox",21),e.NdJ("change",function(){return e.CHM(t),e.oxw().updateCheck()})("ngModelChange",function(l){return e.CHM(t),e.oxw().selectAll=l})("click",function(l){return l.stopPropagation()}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.selectAll)}}function Q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",22),e.TgZ(1,"mat-checkbox",23),e.NdJ("ngModelChange",function(l){return e.CHM(t).$implicit.checked=l})("change",function(l){const v=e.CHM(t).$implicit;return e.oxw().updateCheckedRow(l,v)}),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngModel",t.checked)}}function G(i,o){if(1&i&&(e.TgZ(0,"th",27),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function W(i,o){if(1&i&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&i){const t=o.$implicit,s=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t[s.property]," ")}}function j(i,o){if(1&i&&(e.ynx(0,25),e.YNc(1,G,2,1,"th",26),e.YNc(2,W,2,1,"td",13),e.BQk()),2&i){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function V(i,o){if(1&i&&(e.ynx(0),e.YNc(1,j,3,1,"ng-container",24),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.isModelProperty)}}function H(i,o){1&i&&(e.TgZ(0,"th",29),e._uU(1," Actions "),e.qZA())}function K(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",28),e.TgZ(1,"a",30),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().deleteProspect(g.id)}),e._uU(2,"Delete"),e.qZA(),e.qZA()}}function X(i,o){1&i&&e._UZ(0,"tr",31)}function q(i,o){1&i&&e._UZ(0,"tr",32)}const ee=[{path:"",component:(()=>{class i{constructor(t,s,l){this.dialog=t,this.prospectsService=s,this.apiService=l,this.subject$=new S.t(1),this.data$=this.subject$.asObservable(),this.isLoading=!1,this.totalRows=0,this.pageSize=25,this.currentPage=0,this.all_fields=[],this.all_values=[],this.filterData=[],this.filters={},this.endPoint="",this.range=new a.cw({start:new a.NI,end:new a.NI}),this.notyf=new U.Iq({types:[{type:"info",background:"#6495ED",icon:'<i class="fa-solid fa-clock"></i>'}]}),this.selected="transactionCreatedDate",this.campaign="allCampaigns",this.campaignCategory="allCategories",this.product="allProducts",this.productCategory="allCategories",this.campaignProduct="allCampaignProducts",this.affiliate="allAffiliates",this.callCenter="allCallCenters",this.billType="allBillings",this.billingCycle="all",this.recycleNo="all",this.txnType="all",this.currency="allCurrencies",this.country="allCountries",this.state="allStates",this.gateway="all",this.ccType="all",this.is_3d_protected="all",this.gatewayCategory="allGatewayCategories",this.gatewayType="all",this.creditOrDebit="all",this.search="",this.cardOptions=["visa","master"],this.pageSizeOptions=[5,10,25,100],this.selectedRows=[],this.selectAll=!1,this.isBulkUpdate=!1,this.columns=[{name:"Checkbox",property:"checkbox",visible:!0,isModelProperty:!1},{name:"Id",property:"id",visible:!0,isModelProperty:!0},{name:"First Name",property:"first_name",visible:!0,isModelProperty:!0},{name:"Last Name",property:"last_name",visible:!0,isModelProperty:!0},{name:"Email",property:"email",visible:!0,isModelProperty:!0},{name:"Address",property:"address",visible:!0,isModelProperty:!0},{name:"City",property:"city",visible:!0,isModelProperty:!0},{name:"State",property:"state",visible:!0,isModelProperty:!0},{name:"Zip",property:"zip",visible:!0,isModelProperty:!0},{name:"Country",property:"country",visible:!1,isModelProperty:!0},{name:"Ip Address",property:"ip_address",visible:!1,isModelProperty:!0},{name:"Risk Flag",property:"risk_flag",visible:!1,isModelProperty:!0},{name:"Affiliate",property:"affiliate",visible:!0,isModelProperty:!0},{name:"Sub Affiliate",property:"sub_affiliate",visible:!1,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.endPoint=N.N.endpoint}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}ngOnInit(){this.deleteSubscription=this.prospectsService.deleteResponse$.subscribe(t=>this.manageDeleteResponse(t)),this.deleteAllSubscription=this.prospectsService.deleteAllResponse$.subscribe(t=>this.manageDeleteAllResponse(t)),this.getData(),this.dataSource=new d.by,this.data$.pipe((0,w.h)(t=>!!t)).subscribe(t=>{this.prospects=t,this.dataSource.data=t})}mapData(){return(0,Z.of)(this.prospects.map(t=>new O(t)))}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}pageChanged(t){this.pageSize=t.pageSize,this.currentPage=t.pageIndex,this.getData()}getData(){return(0,h.mG)(this,void 0,void 0,function*(){this.isLoading=!0,this.isBulkUpdate=!1,this.filters={currentPage:this.currentPage,pageSize:this.pageSize,start:(0,r.p6)(this.range.get("start").value,"yyyy/MM/dd","en"),end:(0,r.p6)(this.range.get("end").value,"yyyy/MM/dd","en"),all_fields:this.all_fields,all_values:this.all_values,search:this.search},yield this.prospectsService.getProspects(this.filters).then(t=>{this.prospects=t.data.data,setTimeout(()=>{this.paginator.pageIndex=this.currentPage,this.paginator.length=t.pag.count}),this.mapData().subscribe(s=>{this.subject$.next(s)}),this.isLoading=!1},t=>{this.isLoading=!1})})}getDropData(){return(0,h.mG)(this,void 0,void 0,function*(){fetch(`${this.endPoint}/api/getDropDownContent`).then(s=>s.json()).then(s=>{this.filterData=s})})}commonFilter(t,s){if(-1===this.all_fields.indexOf(s))this.all_fields.push(s),this.all_values.push(t);else{let l=this.all_fields.indexOf(s);this.all_values[l]=t}}manageGetResponse(t){t.status?(this.prospects=t.data.data,this.dataSource.data=t.data.data,setTimeout(()=>{this.paginator.pageIndex=this.currentPage,this.paginator.length=t.pag.count}),this.isLoading=!1):this.isLoading=!1}manageDeleteResponse(t){return(0,h.mG)(this,void 0,void 0,function*(){t.status&&(yield this.getData(),this.notyf.success(t.message))})}manageDeleteAllResponse(t){return(0,h.mG)(this,void 0,void 0,function*(){t.status&&(this.selectAll=!1,this.selectedRows=[],yield this.getData(),this.notyf.success(t.message))})}manageCampaignsResponse(t){t.status&&(this.campaignOptions=t.data)}manageProductsResponse(t){t.status&&(this.productOptions=t.data)}onFilterChange(t){t=t.toLowerCase(),this.search=t,clearTimeout(this.timer),this.timer=setTimeout(()=>{this.getData()},500)}selectDate(t){var s=new Date,l=new Date;"today"==t?(this.range.get("start").setValue(new Date),this.range.get("end").setValue(new Date)):"yesterday"==t?(this.range.get("start").setValue(new Date(s.setDate(s.getDate()-1))),this.range.get("end").setValue(new Date)):"thisMonth"==t?(this.range.get("start").setValue(new Date(s.setMonth(s.getMonth()-1))),this.range.get("end").setValue(new Date)):"pastWeek"==t?(this.range.get("start").setValue(new Date(s.setDate(s.getDate()-7))),this.range.get("end").setValue(new Date)):"pastTwoWeek"==t?(this.range.get("start").setValue(new Date(s.setDate(s.getDate()-14))),this.range.get("end").setValue(new Date)):"lastMonth"==t?(this.range.get("start").setValue(new Date(s.setMonth(s.getMonth()-2))),this.range.get("end").setValue(new Date(l.setMonth(l.getMonth()-1)))):"lastThreeMonths"==t?(this.range.get("start").setValue(new Date(s.setMonth(s.getMonth()-4))),this.range.get("end").setValue(new Date(l.setMonth(l.getMonth()-1)))):"lastSixMonths"==t&&(this.range.get("start").setValue(new Date(s.setMonth(s.getMonth()-7))),this.range.get("end").setValue(new Date(l.setMonth(l.getMonth()-1))))}deleteProspect(t){const s=new M.f("Confirm Delete","Are you sure you want to delete this prospect?");this.dialog.open(_.z,{maxWidth:"500px",closeOnNavigation:!0,data:s}).afterClosed().subscribe(g=>{g&&this.prospectsService.deleteProposal(t)})}updateCheck(){!0===this.selectAll?(this.selectedRows=[],this.prospects.map(t=>{t.checked=!0,this.selectedRows.push(t),this.isBulkUpdate=!0})):(this.prospects.map(t=>{t.checked=!1,this.isBulkUpdate=!1}),this.selectedRows=[],this.isBulkUpdate=!1)}updateCheckedRow(t,s){t.checked?(s.checked=!0,this.selectedRows.push(s),this.isBulkUpdate=!0):(s.checked=!1,this.selectedRows.splice(this.selectedRows.indexOf(s),1),0===this.selectedRows.length&&(this.isBulkUpdate=!1))}handleBulkDeleteAction(){const t=new M.f("Confirm Delete","Are you sure to delete these prospects?");this.dialog.open(_.z,{maxWidth:"500px",closeOnNavigation:!0,data:t}).afterClosed().subscribe(l=>{l&&this.prospectsService.deleteAll(this.selectedRows)})}ngOnDestroy(){this.deleteSubscription&&(this.prospectsService.deleteResponse.next([]),this.deleteSubscription.unsubscribe()),this.deleteAllSubscription&&(this.prospectsService.deleteAllResponse.next([]),this.deleteAllSubscription.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.uw),e.Y36(I),e.Y36(T.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["fury-prospects"]],viewQuery:function(t,s){if(1&t&&(e.Gf(p.NW,7),e.Gf(u.YE,7)),2&t){let l;e.iGM(l=e.CRH())&&(s.paginator=l.first),e.iGM(l=e.CRH())&&(s.sort=l.first)}},inputs:{columns:"columns"},decls:20,vars:13,consts:[["mode","simple"],["fxLayout","row","layout-wrap","","fxLayoutGap","10px",1,"mb"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["name","Prospects",3,"columns","filterChange"],["mode","indeterminate",4,"ngIf"],[1,"sticky-columns"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mat-raised-button","","color","warn",3,"click"],["mode","indeterminate"],["mat-header-cell","",1,"actions-cell"],["color","accent",3,"ngModel","change","ngModelChange","click"],["mat-cell","",1,"actions-cell"],["color","primary",3,"ngModel","ngModelChange","change"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"delete-link",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,s){1&t&&(e.TgZ(0,"fury-page-layout",0),e.TgZ(1,"fury-page-layout-content"),e.TgZ(2,"div",1),e.TgZ(3,"div"),e.YNc(4,$,2,1,"button",2),e.qZA(),e.qZA(),e.TgZ(5,"fury-list",3),e.NdJ("filterChange",function(g){return s.onFilterChange(g)}),e.YNc(6,Y,1,0,"mat-progress-bar",4),e.TgZ(7,"div",5),e.TgZ(8,"table",6),e.ynx(9,7),e.YNc(10,F,2,1,"th",8),e.YNc(11,Q,2,1,"td",9),e.BQk(),e.YNc(12,V,2,1,"ng-container",10),e.ynx(13,11),e.YNc(14,H,2,0,"th",12),e.YNc(15,K,3,0,"td",13),e.BQk(),e.YNc(16,X,1,0,"tr",14),e.YNc(17,q,1,0,"tr",15),e.qZA(),e.qZA(),e.TgZ(18,"mat-paginator",16,17),e.NdJ("page",function(g){return s.pageChanged(g)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(3),e.Q6J("ngIf",s.isBulkUpdate),e.xp6(1),e.Q6J("columns",s.columns),e.xp6(1),e.Q6J("ngIf",s.isLoading),e.xp6(2),e.Q6J("dataSource",s.dataSource),e.xp6(4),e.Q6J("ngForOf",s.columns),e.xp6(4),e.Q6J("matHeaderRowDef",s.visibleColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",s.visibleColumns),e.xp6(1),e.Q6J("length",s.totalRows)("pageIndex",s.currentPage)("pageSize",s.pageSize)("pageSizeOptions",s.pageSizeOptions))},directives:[B.N,J.d,R.xw,R.SQ,r.O5,z.n,d.BZ,u.YE,d.w1,d.fO,d.Dz,r.sg,d.as,d.nj,p.NW,A.lW,b.pW,d.ge,L.oG,a.JJ,a.On,d.ev,u.nU,d.XQ,d.Gk],styles:[".view-link[_ngcontent-%COMP%]{color:#6495ed}.delete-link[_ngcontent-%COMP%]{color:#f62217}.clickable[_ngcontent-%COMP%]{cursor:pointer}.mb[_ngcontent-%COMP%]{margin-bottom:10px}.sticky-columns[_ngcontent-%COMP%]{height:550px;max-width:100%;overflow:auto}"],data:{animation:[k.M,E.X]}}),i})()}];let te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.Bz.forChild(ee)],c.Bz]}),i})();var se=n(9198),ie=n(6153),ne=n(9112),oe=n(138),ae=n(9859),le=n(6400),re=n(8727),ce=n(6731),de=n(3050),he=n(8898);let pe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[r.ez,te,a.u5,a.UX,C.q,se.Z,ie.o9,x.Is,oe.c,A.ot,ne.Ps,ae.Fk,le.LD,re.FA,ce.XK,de.To,he.IJ,f.p,y.J,d.p0,p.TU,b.Cv]]}),i})()}}]);